(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,r,n){e.exports=n(13)},,,,,,function(e,r,n){},function(e,r,n){},function(e,r,n){},function(e,r,n){"use strict";n.r(r);var t=n(0),a=n.n(t),u=n(3),o=n.n(u),i=(n(10),n(1));n(11),n(12);var c=function(e){var r=e.value;return a.a.createElement("div",{className:"cell"},r||"")};var f=function(e){var r=e.data.map(function(e){var r=e.map(function(e){return a.a.createElement("td",null,a.a.createElement(c,{value:e}))});return a.a.createElement("tr",null,r)});return a.a.createElement("table",null,a.a.createElement("tbody",null,r))};var l=function(e){var r=e.value;return a.a.createElement("div",{className:"score"},"Score: ",r)};var m=function(e){var r=e.dispatch;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Game Over!"),a.a.createElement("button",{onClick:function(){r({type:"new"})}},"Restart"))},s=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"];function v(){return function(e){for(var r=e.length-1;r>0;r--){var n=Math.floor(Math.random()*(r+1)),t=[e[n],e[r]];e[r]=t[0],e[n]=t[1]}return e}([2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0]).reduce(function(e,r,n){return e[n%4].push(r),e},[[],[],[],[]])}function d(e,r){var n=function(e,r){switch(r){case"ArrowUp":return function(e){var r=E(p(e));return{matrix:h(r.matrix),sum:r.sum}}(e);case"ArrowRight":return function(e){var r=E(p(p(e)));return{matrix:h(h(r.matrix)),sum:r.sum}}(e);case"ArrowDown":return function(e){var r=E(h(e));return{matrix:p(r.matrix),sum:r.sum}}(e);case"ArrowLeft":return E(e);default:return{matrix:e,sum:0}}}(e,r);return JSON.stringify(e)!==JSON.stringify(n.matrix)&&(n.matrix=function(e){var r=e.flat(),n=r.filter(function(e){return 0===e}).length;if(0===n)return e;var t=Math.floor(Math.random()*Math.floor(n)),a=function(e,r){if(0===r)return e.indexOf(0);var n=0,t=0;for(;n!==r;)t=e.indexOf(0,t+1),n++;return t}(r,t);return e[Math.floor(a/4)][a%4]=2,e}(n.matrix)),n.canMove=function(e){if(function(e){return e.flat().filter(function(e){return 0===e}).length>0}(e))return!0;for(var r=0;r<e.length;r++)for(var n=0;n<e[0].length;n++){var t=e[r][n];if(r>0&&e[r-1][n]===t||n<3&&e[r][n+1]===t||r<3&&e[r+1][n]===t||n>0&&e[r][n-1]===t)return!0}return!1}(n.matrix),n}function w(e){return e[0].map(function(r,n){return e.map(function(e){return e[n]})})}function h(e){return w(e.reverse())}function p(e){return w(e).reverse()}function E(e){var r=0;return{matrix:e.map(function(e){var n=[0,0,0,0],t=0;return e.map(function(e,a){0!==e&&(0===n[t]?n[t]+=e:n[t]===e?(n[t]+=e,t++,r+=2*e):n[++t]=e)}),n}),sum:r}}var g=function(){var e=Object(t.useReducer)(function(e,r){switch(r.type){case"move":var n=d(e.field,r.direction);return{field:n.matrix,score:e.score+n.sum,gameOver:!n.canMove};case"new":return{field:v(),score:0,gameOver:!1};default:return e}},{field:v(),score:0,gameOver:!0}),r=Object(i.a)(e,2),n=r[0],u=r[1],o=function(){var e=Object(t.useState)(!1),r=Object(i.a)(e,2),n=r[0],a=r[1],u=function(e){var r=e.key;s.indexOf(r)>=0&&a(r)},o=function(e){var r=e.key;s.indexOf(r)>=0&&a(!1)};return Object(t.useEffect)(function(){return window.addEventListener("keydown",u),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",u),window.removeEventListener("keyup",o)}},[]),n}();return Object(t.useEffect)(function(){o&&u({type:"move",direction:o})},[o]),a.a.createElement("div",{className:"main"},n.gameOver&&a.a.createElement(m,{dispatch:u}),a.a.createElement(l,{value:n.score}),a.a.createElement(f,{data:n.field}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[4,1,2]]]);
//# sourceMappingURL=main.a5ee858c.chunk.js.map